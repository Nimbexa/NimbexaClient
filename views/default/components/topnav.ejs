<!--Start topbar header-->
<header class="topbar-nav">
  <nav class="navbar navbar-expand fixed-top">
   <ul class="navbar-nav mr-auto align-items-center">
      <li class="nav-item">
        <a class="nav-link toggle-menu" href="javascript:void();">
         <i class="icon-menu menu-icon"></i>
       </a>
      </li>
      <li class="nav-item">
            <a href="javascript:void();" id="google_translate_element"><i style="color: transparent;" class="icon-magnifier"></i></a>
       </li>
    </ul>
     <ul class="navbar-nav align-items-center right-nav-link">

        <%= userinfo.global_name %>
        <li class="nav-item">
           <a class="nav-link dropdown-toggle dropdown-toggle-nocaret" data-toggle="dropdown" href="#">
           <span class="user-profile"><img onerror="replaceProfile()" src="<%= userinfo.profile %>" class="img-circle"></span>
           </a>
           <ul class="dropdown-menu dropdown-menu-right">
              <li class="dropdown-item user-details">
                 <a href="../settings">
                    <div class="media">
                       <div class="avatar"><img class="align-self-start mr-3" onerror="replaceImage()" id="profile" src="<%= userinfo.profile %>"></div>
                       <div class="media-body">
                          <h6 class="mt-2 user-title"><%= userinfo.username %></h6>
                          <p class="user-subtitle"><span id="package"></span> Plan</p>
                          <script>
                             function replaceImage() {
                               var image = document.querySelector('.avatar img');
                               image.src = 'https://cdn.discordapp.com/avatars/<%= userinfo.id %>/<%= userinfo.avatar %>';
                             }
                          </script>
                          <script>
                             function replaceProfile() {
                               var image = document.querySelector('.user-profile img');
                               image.src = 'https://cdn.discordapp.com/avatars/<%= userinfo.id %>/<%= userinfo.avatar %>';
                             }
                          </script>
                          <script>
                             async function fetchPackageInfo() {
                               try {
                                 const userId = '<%= userinfo.email %>';
                                 const response = await fetch(`/user/package/${userId}`);
                                 const data = await response.json();
                                 const packageElement = document.getElementById("package");
                                 packageElement.textContent = data.packageName;
                               } catch (error) {
                                 console.error("Failed to fetch package information:", error);
                               }
                             }
                               fetchPackageInfo();
                          </script>
                       </div>
                    </div>
                 </a>
              </li>
              <li class="dropdown-divider"></li>
              <li class="dropdown-item"><i class="bi bi-coin mr-2"></i> <%= coins %> coins</li>
              <li class="dropdown-divider"></li>
              <li onclick="location.href = '../settings';" style="cursor: pointer;"  class="dropdown-item"><i class="icon-settings mr-2"></i> Account</li>
              <li class="dropdown-divider"></li>
              <li onclick="location.href = '../updateinfo';" style="cursor: pointer;" class="dropdown-item"><i class="bi bi-arrow-repeat mr-2"></i> Refresh</li>
              <li class="dropdown-divider"></li>
              <li onclick="location.href = '../logout';" style="color: rgb(255, 47, 47); cursor: pointer;" class="dropdown-item"><i onclick="location.href = '../logout';" class="icon-power mr-2"></i> Logout</li>
           </ul>          
        </li>

       <script>
           $('#google_translate_element').on('click', (e) => {
             e.stopPropagation();
           });
       </script>
       <style>

    .skiptranslate span {
      display: none;
    }
    .goog-te-gadget {
      display: block;
      color: transparent;
    }
         /* Style for the Google Translate dropdown */
         .goog-te-combo {
           font-size: 14px; /* Adjust font size */
           color: #fff; /* Adjust text color */
           border-color: transparent;
           background-color: transparent; /* Adjust background color */
           border-radius: 4px; /* Adjust border radius if desired */
           padding: 5px 10px; /* Adjust padding if needed */
           align-self: center;
           min-width: 150px; /* Adjust width as needed */
           box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* Add box shadow if desired */
         }
       
         /* Style for the Google Translate dropdown options */
         .goog-te-menu2-item {
           font-size: 14px; /* Adjust font size */
           color: #333; /* Adjust text color */
           background-color: #fff; /* Adjust background color */
           padding: 8px 12px; /* Adjust padding if needed */
           border-bottom: 1px solid #e0e0e0; /* Add a separator line between options */
           transition: background-color 0.3s; /* Add a smooth transition effect */
         }
       
         /* Style for the selected language in the dropdown */
         .goog-te-menu2-item-selected {
           background-color: #33cfc47b; /* Adjust background color for the selected option */
         }
       
         /* Style for the Google Translate dropdown arrow */
         .goog-te-gadget-icon {
           display: none; /* Hide the default dropdown arrow */
         }
       </style>     
     </ul>
  </nav>
</header>
<!--End topbar header-->